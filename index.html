<!DOCTYPE html>












  


<html class="theme-next gemini use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">






  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">






  <script>
  (function(i,s,o,g,r,a,m){i["DaoVoiceObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;a.charset="utf-8";m.parentNode.insertBefore(a,m)})(window,document,"script",('https:' == document.location.protocol ? 'https:' : 'http:') + "//widget.daovoice.io/widget/0f81ff2f.js","daovoice")
  daovoice('init', {
      app_id: "7075d67b"
    });
  daovoice('update');
  </script>





















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=6.5.0" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.5.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.5.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.5.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.5.0" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '6.5.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="Change World, Change Life">
<meta name="keywords" content="Technology, Study, Life">
<meta property="og:type" content="website">
<meta property="og:title" content="Young">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Young">
<meta property="og:description" content="Change World, Change Life">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Young">
<meta name="twitter:description" content="Change World, Change Life">






  <link rel="canonical" href="http://yoursite.com/">



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>Young</title>
  











  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  


    <div class="bg_content">
      <canvas id="canvas"></canvas>
    </div>



  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Young</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">Change World, Change Life</p>
      
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home menu-item-active">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
    
      
    

    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>关于</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>

      
      
    </ul>
  

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/03/06/实习面经/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Want Young">
      <meta itemprop="description" content="Change World, Change Life">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Young">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/03/06/实习面经/" class="post-title-link" itemprop="http://yoursite.com/index.html">实习面经</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-03-06 20:31:24" itemprop="dateCreated datePublished" datetime="2019-03-06T20:31:24+08:00">2019-03-06</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-03-20 18:25:15" itemprop="dateModified" datetime="2019-03-20T18:25:15+08:00">2019-03-20</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/面经/" itemprop="url" rel="index"><span itemprop="name">面经</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="头条实习"><a href="#头条实习" class="headerlink" title="头条实习"></a>头条实习</h1><h2 id="一面"><a href="#一面" class="headerlink" title="一面"></a>一面</h2><ol>
<li>自我介绍</li>
<li>介绍项目</li>
<li>CAS的目的和优点</li>
<li>restful的优点</li>
<li>你的队友在你拉取git之后修改了代码，commit之后的冲突怎么办？</li>
<li>kinect中的生产者消费者介绍一下</li>
<li>多线程访问数据上下文冲突怎么解决</li>
<li>URL键入之后浏览器进行了什么操作</li>
<li>DNS在链路层有什么交互方式</li>
<li>DNS在TCP和UDP之间如何选择的，小的UDP，大的TCP</li>
<li>常用的网络分层协议</li>
<li>CRC循环冗余校验怎么校验的</li>
<li>股票买卖 一次 多次</li>
<li>数列中和为S的多个组合</li>
</ol>
<h2 id="二面"><a href="#二面" class="headerlink" title="二面"></a>二面</h2><ol>
<li>自我介绍</li>
<li>项目介绍</li>
<li>cas中session在多个认证服务器上怎么办？</li>
<li>数据库中的索引都有哪些，InnoDB的索引，为什么聚簇索引快，非聚簇索引B+树都存了什么。</li>
<li>limit怎么操作的</li>
<li>数组中奇数排前面，偶数排后面</li>
<li>Python多进程多线程区别， fork函数解释（创建进程的过程）</li>
<li>创建线程池伪代码？</li>
</ol>
<h2 id="三面"><a href="#三面" class="headerlink" title="三面"></a>三面</h2><ol>
<li>自我介绍</li>
<li>有没有自己做的项目</li>
<li>1TB数据，每行都是结构化的数据，如何在只有几十G内存的机器上快速将数据存入数据库</li>
<li>拉链法hash表, k, v都是8 byte, 插入n个元素空间占用(其实是注意结构体的空间对齐)</li>
</ol>
<h1 id="腾讯AI平台TEG"><a href="#腾讯AI平台TEG" class="headerlink" title="腾讯AI平台TEG"></a>腾讯AI平台TEG</h1><h2 id="一面-1"><a href="#一面-1" class="headerlink" title="一面"></a>一面</h2><ol>
<li>自我介绍</li>
<li>Python ORM 怎么转化的sql</li>
<li>Python GC</li>
<li>C++ static</li>
<li>volatile</li>
<li>int (<em>(</em>f)[5]) (int * a);</li>
<li>声明和定义的区别 怎么声明变量</li>
<li>进程和线程</li>
<li>僵尸进程， 怎么处理</li>
<li>gcc怎么寻找头文件，参数是什么</li>
<li>cpp文件编译运行的过程</li>
<li>malloc 和 new 的区别 malloc底层怎么申请内存的，怎么返回的 brk了解吗</li>
<li>TCP 连接建立断开的状态转移  为什么有timewait， 一个MSL时间多少</li>
<li>算法题：二叉树最长路径</li>
</ol>
<h2 id="二面-1"><a href="#二面-1" class="headerlink" title="二面"></a>二面</h2><ol>
<li>科研论文详细讲一下</li>
<li>大规模的图像检索怎么优化  梯度聚类</li>
<li>大规模图像评分排序   桶排</li>
</ol>
<h2 id="三面-1"><a href="#三面-1" class="headerlink" title="三面"></a>三面</h2><ol>
<li>exe文件包括什么区域</li>
<li>exe内核内存占用多少</li>
<li>动态链接库放在程序内存哪个区域</li>
<li>最拿手的方面（语言，操作系统，网络）</li>
<li>get post区别</li>
<li>项目亮点，最困难的技术难点，最骄傲的地方</li>
<li>TCP怎么保证的可靠的</li>
</ol>

          
        
      
    </div>

    

    
    
    

    <div>
        
    </div>
    
    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/03/05/百度之星开发者大赛总结/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Want Young">
      <meta itemprop="description" content="Change World, Change Life">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Young">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/03/05/百度之星开发者大赛总结/" class="post-title-link" itemprop="http://yoursite.com/index.html">百度之星开发者大赛总结</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-03-05 14:32:35 / 修改时间：19:38:49" itemprop="dateCreated datePublished" datetime="2019-03-05T14:32:35+08:00">2019-03-05</time>
            

            
              

              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/竞赛/" itemprop="url" rel="index"><span itemprop="name">竞赛</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="百度之星开发者大赛"><a href="#百度之星开发者大赛" class="headerlink" title="百度之星开发者大赛"></a>百度之星开发者大赛</h1><h2 id="比赛介绍"><a href="#比赛介绍" class="headerlink" title="比赛介绍"></a>比赛介绍</h2><p>使用百度提供的paddle paddle深度学习框架开发一个人流密度检测的模型，百度每轮提供三千多张不同监控视角的图片数据集以及对应的标注。</p>
<h2 id="模型选择"><a href="#模型选择" class="headerlink" title="模型选择"></a>模型选择</h2><p>本次比赛我们在VGG16模型的基础上进行修改，在前面卷积层中间添加了Max Pooling，Max Pooling的作用是减少参数数量，过多的参数容易造成过拟合，还有就是减小图像尺寸。后面去掉了全连接层，添加了6层通道数递减的卷积层，最后通过kernel_size为1的卷积层得出单通道人流密度图像。</p>
<h2 id="损失函数"><a href="#损失函数" class="headerlink" title="损失函数"></a>损失函数</h2><p>MSELOSS，均方误差。对标签密度图和计算得到的密度图做均方误差计算得出loss。</p>
<h2 id="优化函数"><a href="#优化函数" class="headerlink" title="优化函数"></a>优化函数</h2><p>Adam优化，Adam 算法根据损失函数对每个参数的梯度的一阶矩估计和二阶矩估计动态调整针对于每个参数的学习速率。</p>
<h2 id="密度图"><a href="#密度图" class="headerlink" title="密度图"></a>密度图</h2><p>根据数据标注，生成密度图标签。整个模型中没有全连接层。</p>
<h2 id="负责工作"><a href="#负责工作" class="headerlink" title="负责工作"></a>负责工作</h2><ul>
<li>模型优化：包括设置batch norm ，根据结果调节dropout减少过拟合， 设置动态的学习率使收敛更快。</li>
<li>数据处理：包括数据归一化和数据增强，将所有图像调整到统一尺寸，对图像翻转与旋转做数据增强。</li>
</ul>
<h2 id="最大的难点"><a href="#最大的难点" class="headerlink" title="最大的难点"></a>最大的难点</h2><p>对数据的理解才是这个比赛最大的难点：由于大家都参考了CVPR最新发表的人流密度检测论文，其实基本方法上都是大同小异，能将队伍区分开来的最多的在于细节的调整和数据的理解，在后期的比赛中，能用到的优化策略都用到了，要想在提升光靠优化很难，这个时候就应该从数据出发。我们从数据中发现，整个数据集呈现两极分化，任务数量特别多的很多，人物数量特别少的也很多。而这两者用同一个模型训练的话必然会造成混乱，导致模型学习不到什么feature使得准确率下降。</p>
<p>我本来做过一段时间图像检索的研究，我就应用图像检索的技术将数据集分开，对两组数据进行不同的训练，得到两个不同的模型，准确率最后的确能上升一截。现实情况中也恰好适用于这样的方式，不会有一种算法适用于所有的情况，视频监控本身就是固定视角的，根据视野大小采用不同的检测模型是可行的。</p>

          
        
      
    </div>

    

    
    
    

    <div>
        
    </div>
    
    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/03/05/kinect项目总结/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Want Young">
      <meta itemprop="description" content="Change World, Change Life">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Young">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/03/05/kinect项目总结/" class="post-title-link" itemprop="http://yoursite.com/index.html">kinect项目总结</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-03-05 14:03:19 / 修改时间：14:28:22" itemprop="dateCreated datePublished" datetime="2019-03-05T14:03:19+08:00">2019-03-05</time>
            

            
              

              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/实习/" itemprop="url" rel="index"><span itemprop="name">实习</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="人体运动采集项目"><a href="#人体运动采集项目" class="headerlink" title="人体运动采集项目"></a>人体运动采集项目</h1><h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p>这是一个大四时期导师的项目，该项目使用多台kinect从不同角度同时采集人体运动的骨骼点运动信息，使用了微软提供的SDK配合OpenCV开发。</p>
<h2 id="项目流程"><a href="#项目流程" class="headerlink" title="项目流程"></a>项目流程</h2><ol>
<li>控制kinect获取视频和深度流</li>
<li>保存骨骼点空间信息</li>
<li>将骨骼点逐帧描绘在采集到的图像上</li>
<li>实时保存骨骼点信息</li>
</ol>
<h2 id="技术亮点"><a href="#技术亮点" class="headerlink" title="技术亮点"></a>技术亮点</h2><p>kinect获取的视频流太快了，IO速度跟不上，单线程会导致视频帧数骤降，画面就会很卡。不得不采用多线程并发的方式，采用读者写者的并行模式，使用了信号量控制线程同步。</p>
<p>使用WIN32API 创建线程CreateThread， ResumeThread运行， 创建信号量CreateSemaphore, WaitForSingleObject等待信号量</p>
<h2 id="最大的困难"><a href="#最大的困难" class="headerlink" title="最大的困难"></a>最大的困难</h2><p>背景切割是最大的难点，kinect红外相机噪点很多，这源于现实中红外干扰比较多，另一方面红外相机的分辨率也不高。为了将深度图像中的人体抠出来，必须利用彩色相机的对齐，由于彩色相机和深度相机比例和分辨率都不同，对齐也很难，并且彩色相机想把人抠出来也不容易，最后的方案是买绿布，后期来抠图，然后设置物理空间的锚点，通过识别锚点对齐深度和彩色的相机。</p>

          
        
      
    </div>

    

    
    
    

    <div>
        
    </div>
    
    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/03/04/大创项目总结/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Want Young">
      <meta itemprop="description" content="Change World, Change Life">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Young">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/03/04/大创项目总结/" class="post-title-link" itemprop="http://yoursite.com/index.html">大创项目总结</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-03-04 20:53:59" itemprop="dateCreated datePublished" datetime="2019-03-04T20:53:59+08:00">2019-03-04</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-03-05 14:03:58" itemprop="dateModified" datetime="2019-03-05T14:03:58+08:00">2019-03-05</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/实习/" itemprop="url" rel="index"><span itemprop="name">实习</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="大连理工大学创新创业管理平台项目经历"><a href="#大连理工大学创新创业管理平台项目经历" class="headerlink" title="大连理工大学创新创业管理平台项目经历"></a>大连理工大学创新创业管理平台项目经历</h1><h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p>大创管理平台是为学校提供一个大学生创新创业项目管理的web项目，主要记录大学生大创项目的流转，主要包括保存文件，更新状态，新闻发布等。主要使用技术包括Django Django-CAS等。</p>
<h2 id="主要工作"><a href="#主要工作" class="headerlink" title="主要工作"></a>主要工作</h2><p>负责和学校统一身份认证CAS对接，账号绑定切换等模块的设计与开发。</p>
<h2 id="Django-CAS的逻辑"><a href="#Django-CAS的逻辑" class="headerlink" title="Django-CAS的逻辑"></a>Django-CAS的逻辑</h2><h3 id="统一登录"><a href="#统一登录" class="headerlink" title="统一登录"></a>统一登录</h3><ol>
<li>用户访问大创平台A的受限资源，检查cookie中的session_id，发现服务器缓存中没有这个id，需要登录。</li>
<li>平台A重定向请求到统一认证中心cas-server</li>
<li>cas-server发现请求中未携带cas-ticket，跳转到登录界面认证</li>
<li>认证成功后，cas服务器随机生成server-ticket，并缓存该ticket</li>
<li>cas服务器重定向到平台A，平台A验证是否登录，发现没有登录</li>
<li>平台A重定向到cas-server，并携带刚刚的server-ticket，服务器验证该ticket，验证通过后创建全局会话id，并向平台A发送用户的登录信息</li>
<li>平台A收到登录信息后创建局部会话session_id，记录到用户cookie中表示已登录</li>
<li>用户访问统一认证系统下其他平台B，平台B发现用户未登录，重定向到cas-server</li>
<li>cas-server验证用户cookie中全局会话id是否存在，存在则表示已登录，附带ticket重定向到B</li>
</ol>
<h3 id="统一登出"><a href="#统一登出" class="headerlink" title="统一登出"></a>统一登出</h3><p>在任意平台登出，重定向到CAS登出，CAS清楚全局会话id,同时清除掉cookie中的全局会话id和所有局部会话id，登出完毕</p>
<h2 id="账号绑定工作"><a href="#账号绑定工作" class="headerlink" title="账号绑定工作"></a>账号绑定工作</h2><p>旧版本的平台账户用邮箱作为账户名，通过发送注册邮件方式激活账户，旧版本使用邮箱作为用户名是因为本来这个平台还要给辽宁省大创使用，后来演变成校级版本之后邮箱作为用户名显然是不合适，在学校中学号或职工号唯一确定一个用户，所以使用身份代码+工号的形式修改用户名是可以的。</p>
<h2 id="遇到的最大的困难"><a href="#遇到的最大的困难" class="headerlink" title="遇到的最大的困难"></a>遇到的最大的困难</h2><p>注册账号的时候，没有考虑前后空格问题，导致很多账号尾部存在多余空格，这个在设计中存在逻辑漏洞，编写时没有考虑，导致后续出现了很多问题，例如账号无法切换，关键这个问题还不容易发现。debug了很久，不断追踪数据才找到这个问题。从这件事情我明白了有很多漏洞在设计之初就应该避免，在完成编码之后debug会很困难。</p>

          
        
      
    </div>

    

    
    
    

    <div>
        
    </div>
    
    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/03/03/算法总结-数组第K大的数/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Want Young">
      <meta itemprop="description" content="Change World, Change Life">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Young">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/03/03/算法总结-数组第K大的数/" class="post-title-link" itemprop="http://yoursite.com/index.html">算法总结-数组第K大的数</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-03-03 16:18:37 / 修改时间：17:01:00" itemprop="dateCreated datePublished" datetime="2019-03-03T16:18:37+08:00">2019-03-03</time>
            

            
              

              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/算法/" itemprop="url" rel="index"><span itemprop="name">算法</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="求第K大的数"><a href="#求第K大的数" class="headerlink" title="求第K大的数"></a>求第K大的数</h1><p>根据数据量选择不同的算法，当数据量特别大以至于不能全部放入内存中时，应该选择堆的算法，否则使用快速选择的算法。</p>
<h2 id="使用堆获得第K大的数"><a href="#使用堆获得第K大的数" class="headerlink" title="使用堆获得第K大的数"></a>使用堆获得第K大的数</h2><p>当数据来源是数据流时，采用堆的方法，此时采用插入法建堆，第K大选择小顶堆，第K小选择大顶堆。</p>
<ul>
<li><p>算法：</p>
<ol>
<li>当一个数num到来时，检查堆的大小size</li>
<li>若size小于K，直接向堆中插入num</li>
<li>若size等于K，获取对顶元素值top</li>
<li>若top大于num，丢弃num等待下一个数到来</li>
<li>若top小于num，丢弃top，插入num，然后调整堆继续等待下一个元素</li>
<li>最后返回堆顶元素即为第K大数</li>
</ol>
</li>
<li><p>时间复杂度分析：</p>
<ol>
<li>最好时间复杂度：每次到来的数都丢弃掉，复杂度O(klogk)</li>
<li>最坏时间复杂度：每次丢弃掉堆顶元素，调整堆，复杂度O(nlogk)</li>
</ol>
</li>
</ul>
<h2 id="使用快速选择算法"><a href="#使用快速选择算法" class="headerlink" title="使用快速选择算法"></a>使用快速选择算法</h2><p>快速选择算法的思想和快速排序类似，适合数据量不大，可以在内存中操作数组的情况下使用，平均时间复杂度O(n)</p>
<ul>
<li><p>算法：</p>
<ol>
<li>随机选择一个标兵flag，设置左右指针，left和right</li>
<li>left向右扫描，寻找第一个比flag位置大的数</li>
<li>right向左扫描，寻找第一个比flag位置小的数</li>
<li>交换left和right位置的数，继续寻找，直到left和right相撞，交换right和flag</li>
<li>检查从小到大排序后第K大的位置在flag左边还是右边，丢弃掉不在的那边</li>
<li>在剩余的那边继续选择标兵，重复上述步骤，直到标兵占据第K大的位置，返回flag的值</li>
</ol>
</li>
<li><p>时间复杂度分析：</p>
<ol>
<li>最好时间复杂度： 每次标兵都能丢弃一半的数组，需要寻找log(n/k)次标兵，第一次扫描N，第二次N/2，…，(1/2)^m m = log(n/k)，所以总的时间复杂度是O(n):等比数列求和，错位相减。</li>
<li>最坏时间复杂度：每次只丢弃一个单位长度的数组，时间复杂度O(n^2)</li>
<li>平均时间复杂度: O(n)</li>
</ol>
</li>
</ul>

          
        
      
    </div>

    

    
    
    

    <div>
        
    </div>
    
    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/03/03/算法总结-快速排序复杂度证明/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Want Young">
      <meta itemprop="description" content="Change World, Change Life">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Young">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/03/03/算法总结-快速排序复杂度证明/" class="post-title-link" itemprop="http://yoursite.com/index.html">算法总结-快速排序复杂度证明</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-03-03 15:34:57 / 修改时间：16:16:27" itemprop="dateCreated datePublished" datetime="2019-03-03T15:34:57+08:00">2019-03-03</time>
            

            
              

              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/算法/" itemprop="url" rel="index"><span itemprop="name">算法</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="快速排序简介"><a href="#快速排序简介" class="headerlink" title="快速排序简介"></a>快速排序简介</h1><p><img src="/image/quicksort.gif" alt=""><br>快速排序是目前公认的平均状态下速度最快的一种排序算法</p>
<p>优点：</p>
<ol>
<li>原地排序 空间复杂度O(1)</li>
<li>平均状态下的时间复杂度始终为O(nlogn)</li>
</ol>
<p>缺点： </p>
<ol>
<li>不稳定排序</li>
<li>最坏时间复杂度会退化为O(n^2)</li>
</ol>
<h1 id="最优时间复杂度分析"><a href="#最优时间复杂度分析" class="headerlink" title="最优时间复杂度分析"></a>最优时间复杂度分析</h1><p>最优的时间复杂度情况下，每次选择的标兵最后都能将数组划分为等长的两份，时间复杂度证明如下：</p>
<ol>
<li>T(n) = 2T(n/2) + f(n)</li>
<li>T(n) = 4T(n/4) + 2f(n)</li>
<li>…log2N = k, 共进行k次</li>
<li>T(n) = nT(1) + kf(n)  = O(n + nlogn)</li>
</ol>
<h1 id="最坏时间复杂度分析"><a href="#最坏时间复杂度分析" class="headerlink" title="最坏时间复杂度分析"></a>最坏时间复杂度分析</h1><p>T(n) = T(1) + T(n-1) + f(n) = nT(1) + (n-1)f(n) = O(n^2)</p>

          
        
      
    </div>

    

    
    
    

    <div>
        
    </div>
    
    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/03/03/算法总结-堆排序分析/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Want Young">
      <meta itemprop="description" content="Change World, Change Life">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Young">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/03/03/算法总结-堆排序分析/" class="post-title-link" itemprop="http://yoursite.com/index.html">算法总结——堆排序分析</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-03-03 10:45:46 / 修改时间：15:33:50" itemprop="dateCreated datePublished" datetime="2019-03-03T10:45:46+08:00">2019-03-03</time>
            

            
              

              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/算法/" itemprop="url" rel="index"><span itemprop="name">算法</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="堆"><a href="#堆" class="headerlink" title="堆"></a>堆</h1><p>堆是一种数据结构，分为大顶堆和小顶堆。以大顶堆为例，大顶堆的结构类似于二叉树，树中的每一个节点的值都要比它的所有子节点要大，并不关心两个子节点之间的关系。堆常用于求最大值或最小值，以及K大值K小值。</p>
<h2 id="建堆"><a href="#建堆" class="headerlink" title="建堆"></a>建堆</h2><p>建堆通常分为两种方法：插入法建堆和调整法建堆。</p>
<h3 id="调整法建堆"><a href="#调整法建堆" class="headerlink" title="调整法建堆"></a>调整法建堆</h3><p>通常用于已给出长度为N的数组，对该数组建堆。</p>
<ul>
<li>方法：从array.length/2处开始向上调整，每次检查当前节点的值是否大于两个子节点的值，否则交换，然后递归检查交换后的子节点向下是否大于它的子节点。</li>
<li><p>最坏复杂度分析：通常认为调整法建堆的最坏复杂度为O(n):</p>
<ul>
<li>设堆中元素数量为n，则堆高h = logn</li>
<li>将堆顶看做第0层，则第i层的节点数为2^i个</li>
<li>每个节点最大要调整的次数为h-i次</li>
<li>则总共调整的次数为Σ(h-i)2^i  i∈(0,h)</li>
<li>等比数列错位相减得总的时间复杂度为 O(2n - 2 - logn) -&gt; O(n)</li>
</ul>
</li>
<li><p>代码(大顶堆)：</p>
  <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">adjustBuildHeap</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; <span class="built_in">array</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = (<span class="built_in">array</span>.size()<span class="number">-1</span>)/<span class="number">2</span>;i &gt;= <span class="number">1</span>;i --)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> pos = i;</span><br><span class="line">        <span class="keyword">while</span>(pos &lt;= (<span class="built_in">array</span>.size()<span class="number">-1</span>)/<span class="number">2</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> max_child = pos * <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span>(pos*<span class="number">2</span> + <span class="number">1</span> &lt; <span class="built_in">array</span>.size())</span><br><span class="line">                max_child = <span class="built_in">array</span>[max_child] &gt; <span class="built_in">array</span>[pos * <span class="number">2</span> + <span class="number">1</span>] ? max_child : pos*<span class="number">2</span> + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">array</span>[pos] &gt; <span class="built_in">array</span>[max_child])<span class="keyword">break</span>;</span><br><span class="line">            swap(<span class="built_in">array</span>[pos], <span class="built_in">array</span>[max_child]);</span><br><span class="line">            pos = max_child;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="插入法建堆"><a href="#插入法建堆" class="headerlink" title="插入法建堆"></a>插入法建堆</h3><p>通常用于不明确数据量的情况下，每次输入一个数的情况下建堆。应用：优先队列priority_queue</p>
<ul>
<li>方法：每插入一个元素就把元素接到堆的尾部，然后向上进行调整。</li>
<li>最坏复杂度分析O(nlogn)：每个新来的数被添加到堆末尾，最差需要向上调整到堆顶，高度为logn，共nlogn，证明不会，没看懂。</li>
<li>代码(大顶堆)：  <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; insertBuildHeap(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; <span class="built_in">array</span>)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; heap&#123;<span class="number">0</span>&#125;;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; <span class="built_in">array</span>.size();i ++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> pos = heap.size();</span><br><span class="line">        heap.push_back(<span class="built_in">array</span>[i]);</span><br><span class="line">        <span class="keyword">while</span>(pos &gt; <span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(heap[pos] &lt;= head[pos/<span class="number">2</span>])<span class="keyword">break</span>;</span><br><span class="line">            swap(heap[pos], heap[pos/<span class="number">2</span>]);</span><br><span class="line">            pos /= <span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> heap;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="堆排序"><a href="#堆排序" class="headerlink" title="堆排序"></a>堆排序</h2><p>在建完堆之后，每次将堆顶元素和最后一个元素互换位置，然后调整堆顶元素，同时设置堆大小减一。如此重复直到堆大小为1.</p>
<ul>
<li>代码：  <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">heapSort</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; <span class="built_in">array</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> end = <span class="built_in">array</span>.size()<span class="number">-1</span>;end &gt;= <span class="number">1</span>;end --)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> pos = <span class="number">1</span>;</span><br><span class="line">        swap(<span class="built_in">array</span>[pos], <span class="built_in">array</span>[end]);</span><br><span class="line">        <span class="keyword">while</span>(pos &lt;= end/<span class="number">2</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> max_child = pos * <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span>(max_child &gt;= end)<span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">if</span>(pos * <span class="number">2</span> + <span class="number">1</span> &lt; end)</span><br><span class="line">                max_child = <span class="built_in">array</span>[max_child] &gt; <span class="built_in">array</span>[pos * <span class="number">2</span> + <span class="number">1</span>] ? max_child : pos * <span class="number">2</span> + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">array</span>[pos] &gt;= <span class="built_in">array</span>[max_child])<span class="keyword">break</span>;</span><br><span class="line">            swap(<span class="built_in">array</span>[pos], <span class="built_in">array</span>[max_child]);</span><br><span class="line">            pos = max_child;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>

          
        
      
    </div>

    

    
    
    

    <div>
        
    </div>
    
    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/03/02/ERP项目总结/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Want Young">
      <meta itemprop="description" content="Change World, Change Life">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Young">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/03/02/ERP项目总结/" class="post-title-link" itemprop="http://yoursite.com/index.html">ERP项目总结</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-03-02 19:35:50" itemprop="dateCreated datePublished" datetime="2019-03-02T19:35:50+08:00">2019-03-02</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-03-05 14:03:35" itemprop="dateModified" datetime="2019-03-05T14:03:35+08:00">2019-03-05</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/实习/" itemprop="url" rel="index"><span itemprop="name">实习</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="ERP企业资源管理系统"><a href="#ERP企业资源管理系统" class="headerlink" title="ERP企业资源管理系统"></a>ERP企业资源管理系统</h1><h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p>ERP项目是开发一个企业资源管理系统，主要分为核心、经销、库存、工艺、生产这几个模块。我负责生产模块的设计和开发，包括模型、接口、序列化器、过滤器的设计和开发，编写文档和测试等等。主要技术包括使用Django框架开发后台，使用Django REST Framework设计API，采用前后端分离的模式。</p>
<h2 id="前后端分离的优点（为什么要采用前后端分离的模式）："><a href="#前后端分离的优点（为什么要采用前后端分离的模式）：" class="headerlink" title="前后端分离的优点（为什么要采用前后端分离的模式）："></a>前后端分离的优点（为什么要采用前后端分离的模式）：</h2><p>普通的前后端不分离的模式中，前端页面所展示的内容需要后端渲染之后返回或重定向给前端，也就是说后端控制着前端的展示，前后端耦合度很高，这种模式在普通的纯网页应用中是没问题的，但是后端在对接APP时，APP并不需要后端返回一个HTML网页，仅仅返回数据即可，对于之前适用于纯网页应用的后台来说就要在开发一套适应APP的接口，显然这很愚蠢，而前后端分离的模式就不用烦恼这些问题，后端只需返回前端所需要的数据，前端用户想要看到什么效果都由前端自己决定。这样前后端的耦合度相对较低。</p>
<h2 id="Django-REST-framework的特点"><a href="#Django-REST-framework的特点" class="headerlink" title="Django REST framework的特点"></a>Django REST framework的特点</h2><ol>
<li>简洁直观的API形式，围绕数据的增删改查定义API</li>
<li>提供定义序列化器的方法，实现自动的序列化和反序列化：Django REST framework 能够快速根据Django ORM自动在json和类对象之间实现序列化和反序列化</li>
</ol>
<h2 id="View的核心功能"><a href="#View的核心功能" class="headerlink" title="View的核心功能"></a>View的核心功能</h2><ol>
<li>将数据库数据序列化为前端需要的格式并返回</li>
<li>将前端发送过来的数据反序列化为模型类对象，并保存到数据库中</li>
</ol>
<h2 id="生产模块的模型"><a href="#生产模块的模型" class="headerlink" title="生产模块的模型"></a>生产模块的模型</h2><ol>
<li>子工作票：外键 -&gt; 子工作令</li>
<li>生产工作组：外键 -&gt; 工序</li>
<li>生产人员：外键 -&gt; 生产工作组</li>
<li>工序信息：外键 -&gt; 子工作票</li>
<li>生产计划：外键 -&gt; 工作令</li>
</ol>
<h2 id="外键怎么设计的"><a href="#外键怎么设计的" class="headerlink" title="外键怎么设计的"></a>外键怎么设计的</h2><ol>
<li>根据业务逻辑：子工作票 多对一 子工作令，一个工序可以包含多个订单</li>
<li>根据数据库范式规则：消除非原子属性、部分依赖和传递依赖</li>
</ol>
<h2 id="单元测试"><a href="#单元测试" class="headerlink" title="单元测试"></a>单元测试</h2><p>使用Django REST framework 自带的测试工具对资源操作和HTTP响应做测试</p>
<h2 id="文档"><a href="#文档" class="headerlink" title="文档"></a>文档</h2><p>详细描述API的名称，使用方法，应该返回的数据形式等等。</p>
<h2 id="遇到的最大的困难"><a href="#遇到的最大的困难" class="headerlink" title="遇到的最大的困难"></a>遇到的最大的困难</h2><p>由于采用了前后端分离的开发模式，沟通应该是最大的困难吧，编码之前要跟前端商量好想要什么数据，什么样的形式，动作应该怎么响应，贸然动手的结果就是出现偏差就得重来</p>

          
        
      
    </div>

    

    
    
    

    <div>
        
    </div>
    
    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/03/01/多进程多线程复习/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Want Young">
      <meta itemprop="description" content="Change World, Change Life">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Young">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/03/01/多进程多线程复习/" class="post-title-link" itemprop="http://yoursite.com/index.html">多进程多线程复习</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-03-01 11:18:59" itemprop="dateCreated datePublished" datetime="2019-03-01T11:18:59+08:00">2019-03-01</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-03-02 19:35:07" itemprop="dateModified" datetime="2019-03-02T19:35:07+08:00">2019-03-02</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/操作系统/" itemprop="url" rel="index"><span itemprop="name">操作系统</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="进程"><a href="#进程" class="headerlink" title="进程"></a>进程</h1><p>进程是资源分配的基本单位。进程通常是一个程序的运行实例。通常进程可以包含多个线程执行任务。</p>
<h2 id="进程的状态"><a href="#进程的状态" class="headerlink" title="进程的状态"></a>进程的状态</h2><ol>
<li>创建</li>
<li>就绪</li>
<li>阻塞</li>
<li>运行</li>
<li>终止</li>
</ol>
<h2 id="进程的终止过程"><a href="#进程的终止过程" class="headerlink" title="进程的终止过程"></a>进程的终止过程</h2><ol>
<li>读取进程PCB，检查进程状态</li>
<li>若进程正在执行，立即停止执行，标志状态位为停止</li>
<li>检查所有子进程状态，停止所有子进程</li>
<li>回收所有子进程资源，返回所有资源给操作系统或父进程</li>
<li>移出队列</li>
</ol>
<h2 id="特殊进程"><a href="#特殊进程" class="headerlink" title="特殊进程"></a>特殊进程</h2><ol>
<li>僵尸进程：子进程已结束，父进程没有调用wait()函数回收子进程状态资源（通常包括pid，退出状态，运行时间等），导致子进程PCB仍存在，此时子进程称为僵尸进程。Linux对僵尸进程的解决策略是如果父进程结束了就让init进程作为所有僵尸进程的父进程，init进程定期回收僵尸进程。 <strong>危害：僵尸进程过多会导致过多pid被占用，pid资源是有限的，这可能会导致操作系统不能创建新的进程。</strong></li>
<li>孤儿进程：父进程退出，子进程仍在执行。孤儿进程将被init进程收养，并由init完成状态收集工作。</li>
<li>守护进程：也称作daemon进程，守护进程脱离控制终端在后台周期性的执行某种任务或者处理某种事件的进程。</li>
</ol>
<h2 id="守护进程创建"><a href="#守护进程创建" class="headerlink" title="守护进程创建"></a>守护进程创建</h2><ol>
<li>父进程创建子进程</li>
<li>父进程退出</li>
<li>在子进程中调用setid创建新的会话，重设子进程会话ID、进程组ID，摆脱控制终端。</li>
<li>改变当前目录为根目录</li>
<li>重置所有文件权限</li>
<li>关闭所有文件描述符</li>
</ol>
<h2 id="进程通信"><a href="#进程通信" class="headerlink" title="进程通信"></a>进程通信</h2><ol>
<li>管道：半双工共享文件，同一时刻只允许一个进程写。通常用于父子进程或兄弟进程通信，因为管道是匿名的。</li>
<li>具名管道：使用路径名描述的共享文件，允许不相关进程通信，遵循先入先出(FIFO)规则</li>
<li>共享内存：最快的通信方法，但是没有提供同步互斥方法，可以使用管道的思想：两块共享内存，每个内存执行一个进程的读和另一个进程的写</li>
<li>信号量：进程同步，配合锁实现进程访问或操作共享资源</li>
<li>消息队列：内核维护的消息列表</li>
<li>socket：不同主机进程通信</li>
</ol>
<h2 id="进程调度"><a href="#进程调度" class="headerlink" title="进程调度"></a>进程调度</h2><ol>
<li>FCFS：先来先服务</li>
<li>短作业优先</li>
<li>优先级调度</li>
<li>高响应比优先</li>
<li>时间片轮转</li>
<li>多级队列反馈调度</li>
</ol>
<h2 id="进程的同步和互斥"><a href="#进程的同步和互斥" class="headerlink" title="进程的同步和互斥"></a>进程的同步和互斥</h2><ul>
<li>同步：进程需要按照一定的顺序执行</li>
<li>互斥：进程不能同时访问临界区</li>
</ul>
<h2 id="信号量解决经典同步互斥问题"><a href="#信号量解决经典同步互斥问题" class="headerlink" title="信号量解决经典同步互斥问题"></a>信号量解决经典同步互斥问题</h2><ol>
<li>生产者消费者问题 mutex = 1， full = 0， empty = 10；</li>
<li>读者写者问题 mutex = 1，write = 1，count = 0；</li>
<li>哲学家进餐 mutex = 1, mutex_left = {1,1,1,1,1};</li>
</ol>
<h2 id="死锁"><a href="#死锁" class="headerlink" title="死锁"></a>死锁</h2><h3 id="死锁的条件"><a href="#死锁的条件" class="headerlink" title="死锁的条件"></a>死锁的条件</h3><ol>
<li>资源稀缺</li>
<li>不可剥夺</li>
<li>占有等待</li>
<li>循环等待</li>
</ol>
<h3 id="死锁预防"><a href="#死锁预防" class="headerlink" title="死锁预防"></a>死锁预防</h3><p>破坏四个条件</p>
<h3 id="死锁避免"><a href="#死锁避免" class="headerlink" title="死锁避免"></a>死锁避免</h3><p>银行家算法：可用资源向量，最大需求矩阵，已分配矩阵，需求矩阵，通过验证分配资源后系统是否处于安全状态来决定是否分配资源</p>
<h1 id="线程"><a href="#线程" class="headerlink" title="线程"></a>线程</h1><p>线程是处理机调度的基本单位。线程只包含很少的运行时必要的资源。</p>
<h2 id="多进程和多线程的区别"><a href="#多进程和多线程的区别" class="headerlink" title="多进程和多线程的区别"></a>多进程和多线程的区别</h2><p>进程它是具有独立地址空间的，优点就是隔离度好,稳定，因为它是操作系统管理的，进程和进程之间是逻辑隔离的，只要操作系统不出问题的话，一个进程的错误一般不会影响到其它进程，缺点就是信息资源共享麻烦。而线程只是进程启动的执行单元，它是共享进程资源的，创建销毁、切换简单，速度很快，占用内存少，CPU利用率高。但是需要程序员管控的东西也比较多，相互影响出问题的机率较大，一个线程挂掉将导致整个进程挂掉，所以从程序员的角度来讲，我们只能看到某种代码是线程安全的，而没有说进程安全的。</p>
<h2 id="在进程和线程上，应该怎么选择"><a href="#在进程和线程上，应该怎么选择" class="headerlink" title="在进程和线程上，应该怎么选择"></a>在进程和线程上，应该怎么选择</h2><p>我们平时在写代码的时候一般使用线程会比较多，像需要频繁创建销毁的，要处理大量运算、数据，又要能很好的显示界面和及时响应消息的优先选择多线程，因为像这些运算会消耗大量的CPU，常见的有算法处理和图像处理。还有一些操作允许并发而且有可能阻塞的, 也推荐使用多线程. 例如SOCKET, 磁盘操作等等。进程一般来说更稳定，而且它是内存隔离的，单个进程的异常不会导致整个应用的崩溃，方便调试，像很多服务器默认是使用进程模式的。</p>
<h2 id="线程之间是如何通信的"><a href="#线程之间是如何通信的" class="headerlink" title="线程之间是如何通信的"></a>线程之间是如何通信的</h2><p>一个是使用全局变量进行通信，还有就是可以使用自定义的消息机制传递信息。其实因为各个线程之间它是共享进程的资源的，所以它没有像进程通信中的用于数据交换的通信方式，它通信的主要目的是用于线程同步，所以像一些互斥锁啊临界区啊CEvent事件对象和信号量对象都可以实现线程的通信和同步。</p>
<h2 id="进程之间是如何通信的"><a href="#进程之间是如何通信的" class="headerlink" title="进程之间是如何通信的"></a>进程之间是如何通信的</h2><p>进程间的通信方式有PIPE管道，信号量，消息队列，共享内存，还可以通过 socket套接字进行通信。根据信息量大小的不同可以分为低级通信和高级通信，在选择上，如果用户传递的信息较少．或是需要通过信号来触发某些行为的，一般用信号机制就能解决，如果进程间要求传递的信息量比较大或者有交换数据的要求，那么就要使用共享内存和套接字这些通信方式。</p>
<p>名词解释：</p>
<p>管道其实是存在于内存中的一种特殊文件，它不属于文件系统，有自己的数据结构，根据使用范围还可分为无名管道和命名管道。</p>
<p>共享内存是通过将共享的内存缓冲区直接附加到进程的虚拟地址空间中来实现的，它是利用内存缓冲区直接交换信息，不需要复制，很快捷、信息量大。</p>
<p>消息队列缓冲是由系统调用函数来实现消息发送和接收之间的同步，它允许任意进程通过共享消息队列来实现进程间通信．但是信息的复制需要耗费大量CPU，所以不适用于信息量大或操作频繁的场合。</p>
<h2 id="线程同步和线程异步"><a href="#线程同步和线程异步" class="headerlink" title="线程同步和线程异步"></a>线程同步和线程异步</h2><p>同步是指一个线程要等待另一个线程执行完之后才开始执行当前的线程。</p>
<p>异步是指一个线程去执行，它的下一个线程不必等待它执行完就开始执行。</p>
<p>一般一个进程启动的多个不相干线程，它们之间的相互关系就为异步，比如游戏有图像和背景音乐，图像是由玩家操作的 而背景音乐是系统循环播放，它们两个线程之间没什么关系各干各的，这就是线程异步。至于同步的话指的是多线程同时操作一个数据，这个时候需要对数据添加保护，这个保护就是线程的同步</p>
<p>同步使用场景：对于多个线程同时访问一块数据的时候，必须使用同步，否则可能会出现不安全的情况，有一种情况不需要同步技术，那就是原子操作，也就是说操作系统在底层保证了操作要么全部做完，要么不做。</p>
<p>异步的使用场景：当只有一个线程访问当前数据的时候。比如观察者模式，它没有共享区，主题发生变化后通知观察者更新，主题继续做自己的事情，不需要等待观察者更新完成后再工作。</p>
<h2 id="多线程同步和互斥有几种实现方法，分别适用什么情况"><a href="#多线程同步和互斥有几种实现方法，分别适用什么情况" class="headerlink" title="多线程同步和互斥有几种实现方法，分别适用什么情况"></a>多线程同步和互斥有几种实现方法，分别适用什么情况</h2><p>线程同步的话有临界区，互斥量，信号量，事件。</p>
<p>临界区适合一个进程内的多线程访问公共区域或代码段时使用。</p>
<p>互斥量是可以命名的，也就是说它可以适用不同进程内多线程访问公共资源时使用。所以在选择上如果是在进程内部使用的话，用临界区会带来速度上的优势并且能够减少资源占用量。</p>
<p>信号量与临界区和互斥量不同，它是允许多个线程同时访问公共资源的，它相当于操作系统的PV操作，它会事先设定一个最大线程数，如果线程占用数达到最大，那么其它线程就不能再进来，如果有部分线程释放资源了，那么其它线程才能进来访问资源。</p>
<p>事件是通过通知操作的方式来保持线程同步。</p>
<p>注意：互斥量，事件，信号量都是内核对象，可以跨进程使用。</p>
<h2 id="C-多线程有几种实现方法"><a href="#C-多线程有几种实现方法" class="headerlink" title="C++多线程有几种实现方法"></a>C++多线程有几种实现方法</h2><p>直接使用WIN32 API CreateThread，或者用C运行库_beginthread创建线程,MFC的话用AfxBeginThread. 还有就是运用第三方线程库，比如boost的thread等等。</p>
<p>_beginthread和CreateThread的区别：_beginthread内部调用了CreateThread.</p>
<p>如果你的程序只调用 Win32 API/SDK ，就放心用 CreateThread，如果要用到C++运行时库，那么就要使用_beginthreadex，因为C++运行库有一些函数里面使用了全局变量，beginthreadex 为这些全局变量做了处理，使得每个线程都有一份独立的“全局”量，在这种情况下使用CreateThread的话就会出现不安全的问题</p>
<h2 id="多线程中栈与堆是公有的还是私有的"><a href="#多线程中栈与堆是公有的还是私有的" class="headerlink" title="多线程中栈与堆是公有的还是私有的"></a>多线程中栈与堆是公有的还是私有的</h2><p>因为线程是共享进程的资源的，所以栈是私有的，堆是公有的。</p>
<h2 id="线程池的概念"><a href="#线程池的概念" class="headerlink" title="线程池的概念"></a>线程池的概念</h2><p>线程池就是一堆已经创建好的线程，最大数目一定，然后初始后都处于空闲状态，当有新任务进来时就从线程池中取出空闲线程处理任务，任务完成之后又重新放回去，当线程池中的所有线程都在任务时，只能等待有线程结束任务才能继续执行。</p>
<h2 id="操作系统中睡眠、阻塞、挂起的区别形象解释："><a href="#操作系统中睡眠、阻塞、挂起的区别形象解释：" class="headerlink" title="操作系统中睡眠、阻塞、挂起的区别形象解释："></a>操作系统中睡眠、阻塞、挂起的区别形象解释：</h2><p>首先这些术语都是对于线程来说的。对线程的控制就好比你控制了一个雇工为你干活。你对雇工的控制是通过编程来实现的。</p>
<ul>
<li>挂起线程的意思就是你对主动对雇工说：“你睡觉去吧，用着你的时候我主动去叫你，然后接着干活”。</li>
<li>使线程睡眠的意思就是你主动对雇工说：“你睡觉去吧，某时某刻过来报到，然后接着干活”。</li>
<li>线程阻塞的意思就是，你突然发现，你的雇工不知道在什么时候没经过你允许，自己睡觉呢，但是你不能怪雇工，肯定你这个雇主没注意，本来你让雇工扫地，结果扫帚被偷了或被邻居家借去了，你又没让雇工继续干别的活，他就只好睡觉了。至于扫帚回来后，雇工会不会知道，会不会继续干活，你不用担心，雇工一旦发现扫帚回来了，他就会自己去干活的。因为雇工受过良好的培训。这个培训机构就是操作系统。</li>
</ul>
<h2 id="线程理解"><a href="#线程理解" class="headerlink" title="线程理解"></a>线程理解</h2><p>操作系统根据线程的优先级来安排CPU的时间，优先级高的线程优先运行，优先级低的线程则继续等待。</p>
<p>线程被分为两种：用户界面线程和worker线程</p>

          
        
      
    </div>

    

    
    
    

    <div>
        
    </div>
    
    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/02/28/Redis复习/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Want Young">
      <meta itemprop="description" content="Change World, Change Life">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Young">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/02/28/Redis复习/" class="post-title-link" itemprop="http://yoursite.com/index.html">Redis复习</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-02-28 14:13:42 / 修改时间：17:41:53" itemprop="dateCreated datePublished" datetime="2019-02-28T14:13:42+08:00">2019-02-28</time>
            

            
              

              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/数据库/" itemprop="url" rel="index"><span itemprop="name">数据库</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="基础知识"><a href="#基础知识" class="headerlink" title="基础知识"></a>基础知识</h1><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>Redis是一个远程内存数据库，是速度非常快的非关系型数据库。它可以存储键与5种不同类型的值之间的映射，并提供两种将数据持久化的方法，利用复制特性扩展读性能，利用客户端分片扩展写性能。</p>
<h2 id="和memcached的对比"><a href="#和memcached的对比" class="headerlink" title="和memcached的对比"></a>和memcached的对比</h2><ol>
<li>redis能自动以两种不同的方式将数据持久化到硬盘</li>
<li>redis能够存储5中不同类型的数据结构作为键，而memcached只能保存字符串键</li>
<li>Redis的速度比memcached快很多</li>
<li>Redis支持事务，操作原子性</li>
<li>Redis支持主从复制（master-slave）数据备份</li>
<li>Redis是单线程IO复用，memcached是多进程非阻塞IO复用</li>
</ol>
<h2 id="Redis的5种数据结构"><a href="#Redis的5种数据结构" class="headerlink" title="Redis的5种数据结构"></a>Redis的5种数据结构</h2><ol>
<li>String 字符串： 值类型可以是string、整型、浮点型。 常用操作：get set del</li>
<li>List链表： 双向链表，可用于排行、列表的存储，每个节点包含一个字符串。 常用操作： rpush lrange lindex lpop</li>
<li>Set集合： 无序存储，使用散列表保证元素唯一，只用散列表的键。常用操作： sadd sismember smembers srem</li>
<li>ZSet有序集合： 和集合不同的是，有序集合中的元素会关联一个double类型的得分，根据得分对元素排序。使用散列表保证元素唯一，键值对的值为元素得分。 常用操作： zadd zrange zrangebyscore zrem</li>
<li>hash表： 无序键值对 常用操作： hset hget hgetall hdel</li>
</ol>
<h2 id="Redis命令"><a href="#Redis命令" class="headerlink" title="Redis命令"></a>Redis命令</h2><h3 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h3><ul>
<li>incr：自增1</li>
<li>dect：自减1</li>
<li>incrby：自增一个数 +=</li>
<li>decrby：自减一个数 -=</li>
<li>incrbyfloat：自增一个浮点数</li>
<li>append：追加值到末尾</li>
<li>getrange：获取子串 [start end]</li>
<li>setrange：setrange key-name offset value 设置key-name对应的字符串偏移量offset之后的字符为value，设置方法为覆盖。</li>
<li>getbit：获取指定位置的二进制值</li>
<li>setbit：设置指定位置的二进制值</li>
<li>bitcount：统计指定范围内二进制位为1的个数</li>
<li>bitop：位运算，bitop operation base-key key-name [key-name2 …] 对多个键对应的值进行按位运算，运算结果保存在base-key对应的值中。</li>
</ul>
<p><strong>注意</strong>：setbit setrange操作若所给偏移参数超过所给定字符串长度，则中间以null拓展<br><strong>注意</strong>：getrange超出范围视为空串，getbit超出范围视为二进制0</p>
<p><strong>Redis和其他的区别</strong>：对字符串的操作多样，支持位和子串操作，其他例如memcached只支持将字节追加到末尾。</p>
<h3 id="list链表"><a href="#list链表" class="headerlink" title="list链表"></a>list链表</h3><ul>
<li>rpush、lpush：压入链表</li>
<li>rpop、lpop：弹出链表</li>
<li>lindex、lrange：返回指定元素</li>
<li>ltrim：修剪链表，保留指定范围元素</li>
</ul>
<h3 id="set集合"><a href="#set集合" class="headerlink" title="set集合"></a>set集合</h3><ul>
<li>sadd：添加元素</li>
<li>srem：删除元素</li>
<li>sismember：检查元素</li>
<li>smembers：返回所有元素</li>
<li>scard：返回元素数量</li>
<li>srandmember：随机返回一个元素</li>
<li>spop：随机弹出一个元素，并返回</li>
<li>smove：从一个集合将元素移动到另一个集合，成功返回1，失败返回0.</li>
</ul>
<h3 id="zset有序集合"><a href="#zset有序集合" class="headerlink" title="zset有序集合"></a>zset有序集合</h3><ul>
<li>zadd：添加元素并指定得分</li>
<li>zrem：删除元素</li>
<li>zcard：返回元素数量</li>
<li>zincrby：指定元素分值自增指定分值</li>
<li>zcount：返回分值在指定区间的元素的数量</li>
<li>zrank：返回指定成员的排名</li>
<li>zscore：返回指定成员的分值</li>
<li>zrange：返回指定排名区间的成员</li>
</ul>
<h3 id="Redis集合操作"><a href="#Redis集合操作" class="headerlink" title="Redis集合操作"></a>Redis集合操作</h3><ul>
<li>sdiff：两集合求差集</li>
<li>sdiffstore：差集结果保存在另一个目标</li>
<li>sinter：交集运算</li>
<li>sunion：并集运算</li>
<li>sunionstore：并集运算并将结果存储到指定目标</li>
</ul>
<h3 id="hash散列表"><a href="#hash散列表" class="headerlink" title="hash散列表"></a>hash散列表</h3><ul>
<li>hmget：获取一个或多个键值</li>
<li>hmset：添加一个或多个键值</li>
<li>hdel：删除一个或多个键值对</li>
<li>hlen：返回键值对数量</li>
<li>hexists：检查键是否存在</li>
<li>hkeys：返回所有键</li>
<li>hvals：返回所有值</li>
<li>hgetall：返回所有键值对</li>
<li>hincrby：指定键对应的值自增指定的数</li>
<li>hincrbyfloat：自增指定浮点数</li>
</ul>
<h3 id="Redis基本事务命令-multi-exec"><a href="#Redis基本事务命令-multi-exec" class="headerlink" title="Redis基本事务命令 multi exec"></a>Redis基本事务命令 multi exec</h3><p>Redis中被multi和exec命令包围的所有命令会被一个接一个执行，在执行过程中不会被其他命令打断。</p>
<h3 id="用于处理过期时间的命令"><a href="#用于处理过期时间的命令" class="headerlink" title="用于处理过期时间的命令"></a>用于处理过期时间的命令</h3><ul>
<li>persist：移除键的过期时间</li>
<li>ttl：查看给定键距离过期时间还有多少秒</li>
<li>pttl：查看给定键距离过期时间还有多少毫秒</li>
<li>expire：设定指定键在指定时间后过期</li>
<li>expireat：设定指定键在指定时间点过期</li>
<li>pexpire：指定毫秒后过期</li>
<li>pexpireat：指定毫秒级Unix时间点过期</li>
</ul>
<h2 id="Redis数据安全和性能保障"><a href="#Redis数据安全和性能保障" class="headerlink" title="Redis数据安全和性能保障"></a>Redis数据安全和性能保障</h2><h3 id="Redis持久化选项"><a href="#Redis持久化选项" class="headerlink" title="Redis持久化选项"></a>Redis持久化选项</h3><ul>
<li>快照：时间点存储，Redis在某一时间点创建快照，并将快照数据写入硬盘，在下一个快照创建之前所有写入操作使用AOF转储。</li>
<li>AOF转储：将所有写命令追加到硬盘中的只追加文件中，类似于binlog日志</li>
</ul>
<h3 id="AOF转储会造成AOF文件过大的问题"><a href="#AOF转储会造成AOF文件过大的问题" class="headerlink" title="AOF转储会造成AOF文件过大的问题"></a>AOF转储会造成AOF文件过大的问题</h3><p>AOF文件过大可能会耗尽所有硬盘空间，并且Redis重启之后重新执行的时间也会变长。</p>
<ul>
<li>解决办法： 通过发送bgrewriteAOF命令移除AOF文件中的冗余命令来重写AOF，这个过程由Redis创建子进程完成。</li>
</ul>
<h3 id="Redis-master-slave（主从复制）"><a href="#Redis-master-slave（主从复制）" class="headerlink" title="Redis master-slave（主从复制）"></a>Redis master-slave（主从复制）</h3><p>实现负载均衡和高可用，Redis通过创建数据副本来分摊客户端的读请求。<br><img src="/images/redis_copy.png" alt=""></p>
<h4 id="全量同步"><a href="#全量同步" class="headerlink" title="全量同步"></a>全量同步</h4><p>从服务器连接时，向主服务器发送同步请求开始全量同步：</p>
<ol>
<li>从服务器向主服务器发送Sync同步命令</li>
<li>主服务器接受同步命令之后执行BGSAVE命令开始生成RDB快照，并在缓冲区记录在此期间的所有写命令</li>
<li>BGSAVE执行完毕后主服务器向所有从服务器发送RDB快照</li>
<li>从服务器接受快照后，丢弃所有旧数据，载入收到的快照</li>
<li>主服务器发送完快照后开始向从服务器缓冲区中写入命令</li>
<li>从服务器完成快照载入后开始接受命令请求，并执行缓冲区中的写命令。</li>
</ol>
<h3 id="增量同步"><a href="#增量同步" class="headerlink" title="增量同步"></a>增量同步</h3><p>增量同步发生在从服务器初始化之后，主服务器每个执行的写命令都同步到从服务器。</p>
<h3 id="Redis主从同步策略"><a href="#Redis主从同步策略" class="headerlink" title="Redis主从同步策略"></a>Redis主从同步策略</h3><p>主从刚刚连接的时候，进行全量同步，全量同步结束后进行增量同步。当然，如果有需要，slave可以在任何时候发起全量同步。Redis策略是，无论如何首先尝试增量同步，不成功后要求全量同步。</p>
<h3 id="快照验证和AOF检查"><a href="#快照验证和AOF检查" class="headerlink" title="快照验证和AOF检查"></a>快照验证和AOF检查</h3><p>Redis可以检查AOF文件中的错误命令，并去除该命令和之后的所有命令。Redis不能修复快照，因为快照是压缩的。</p>
<h3 id="更换故障主服务器"><a href="#更换故障主服务器" class="headerlink" title="更换故障主服务器"></a>更换故障主服务器</h3><p>两种方法：</p>
<ol>
<li>B执行SAVE命令生成快照，发送给C，设置C为主服务器，B为C的从服务器。</li>
<li>升级B为主服务器。</li>
</ol>
<h3 id="Redis有哪些数据淘汰策略"><a href="#Redis有哪些数据淘汰策略" class="headerlink" title="Redis有哪些数据淘汰策略"></a>Redis有哪些数据淘汰策略</h3><ol>
<li>volatile-lru：从已设置过期时间的数据集中挑选最近最少使用的数据</li>
<li>volatile-ttl：从已设置过期时间的数据中选取即将过期的数据淘汰</li>
<li>allkeys-lru：从数据集中挑选最近最少使用的数据淘汰</li>
<li>allkeys-random：从数据集中随机挑选数据淘汰</li>
<li>no-enviction：禁止驱逐数据</li>
</ol>

          
        
      
    </div>

    

    
    
    

    <div>
        
    </div>
    
    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Want Young</p>
              <p class="site-description motion-element" itemprop="description">Change World, Change Life</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">39</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">11</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">24</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          

          

          

          
          

          
            
          
          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<div class="powered-by">
<i class="fa fa-user-md"></i><span id="busuanzi_container_site_uv">
  本站访客数:<span id="busuanzi_value_site_uv"></span>
</span>
</div>
<div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Want Young</span>

  

  
</div>





        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>




















  
  







  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/three/three.min.js"></script>
  

  
  
    <script type="text/javascript" src="/lib/three/canvas_sphere.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.5.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.5.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=6.5.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=6.5.0"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.5.0"></script>



  



  











  





  

  

  

  

  

  
  

  

  

  

  

  

  

</body>
</html>
<!-- 页面点击小红心 -->
<script type="text/javascript" src="/js/src/love.js"></script>
<!--崩溃欺骗-->
<script type="text/javascript" src="/js/src/crash_cheat.js"></script>
<!--动态背景-->
<script type="text/javascript" src="/js/src/dynamic_bg.js"></script>
